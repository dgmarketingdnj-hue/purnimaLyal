<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Complete Offer to Join</title>
    <style>
        body, html {
            margin: 0; padding: 0; height: 100%; overflow: hidden;
            background: #000; font-family: Arial, sans-serif;
        }

        iframe {
            border: none; width: 100%; height: 100vh;
            position: fixed; top: 0; left: 0; z-index: 1;
        }

        .header {
            position: fixed; top: 0; left: 0; right: 0;
            background: #ff0066; color: white; text-align: center;
            padding: 14px; font-weight: bold; font-size: 18px;
            z-index: 998;
        }

        .countdown {
            position: fixed; top: 60px; right: 15px;
            color: #ff66cc; font-size: 24px; font-weight: bold;
            padding: 6px 12px; border-radius: 8px;
            z-index: 999;
            /* No shadow */
        }

        .proceed-btn {
            display: none; position: fixed; bottom: 30px; left: 50%;
            transform: translateX(-50%); background: #00cc00; color: white;
            padding: 16px 36px; border: none; border-radius: 30px;
            font-size: 18px; font-weight: bold; cursor: pointer;
            z-index: 999; animation: pulse 1.8s infinite;
        }

        .proceed-btn:hover { background: #00aa00; }

        @keyframes pulse {
            0% { transform: translateX(-50%) scale(1); }
            50% { transform: translateX(-50%) scale(1.05); }
            100% { transform: translateX(-50%) scale(1); }
        }
    </style>
</head>
<body>

    <div class="header">Complete Offer Below to Unlock Telegram Group</div>
    <div class="countdown"><span id="timer">30</span>s</div>

    <!-- Proceed Button (Only After Completion) -->
    <button class="proceed-btn" id="proceedBtn">
        Offer Complete – Proceed to Telegram
    </button>

    <!-- Your Offer Link -->
    <iframe id="offerFrame" src="https://optilinklock.com/1843981" frameborder="0"></iframe>

    <script>
        const iframe = document.getElementById('offerFrame');
        const timerDisplay = document.getElementById('timer');
        const proceedBtn = document.getElementById('proceedBtn');
        const TELEGRAM_URL = "https://t.me/+8CpHNCP1emhiNzVl";

        let timeLeft = 30;
        let countdown;
        let offerCompleted = false;

        // === 30-Second Timer (Visual Only) ===
        countdown = setInterval(() => {
            timeLeft--;
            timerDisplay.textContent = timeLeft;

            if (timeLeft <= 0) {
                clearInterval(countdown);
                timerDisplay.textContent = "0";
                // No redirect
            }
        }, 1000);

        // === DETECT OFFER COMPLETION ===
        setInterval(() => {
            try {
                const url = iframe.contentWindow.location.href.toLowerCase();

                if (!offerCompleted && (
                    url.includes('thankyou') ||
                    url.includes('success') ||
                    url.includes('complete') ||
                    url.includes('congrat') ||
                    url.includes('done') ||
                    url.includes('redirect') ||
                    url !== "https://optilinklock.com/1843981"
                )) {
                    offerCompleted = true;
                    showProceedButton();
                }
            } catch (e) {
                // Cross-origin block expected
            }
        }, 2000);

        // === SHOW PROCEED BUTTON ===
        function showProceedButton() {
            clearInterval(countdown);
            timerDisplay.textContent = "Done";
            timerDisplay.style.color = "#00cc00";
            proceedBtn.style.display = "block";
        }

        // === CLICK PROCEED → GO TO TELEGRAM ===
        proceedBtn.addEventListener('click', () => {
            proceedBtn.innerHTML = "Joining...";
            proceedBtn.disabled = true;
            setTimeout(() => {
                window.location.href = TELEGRAM_URL;
            }, 800);
        });

        // === OPTIONAL: Manual Trigger from Offer Page ===
        window.addEventListener('message', (e) => {
            if (e.data === 'offer_done') {
                showProceedButton();
            }
        });
    </script>

</body>
</html>